#!/bin/sh

echo "ğŸ”§ Running pre-commit checks..."

# Ensure dependencies are installed
if [ ! -d "node_modules" ]; then
  echo "ğŸ“¦ Installing dependencies..."
  npm install
fi

# Lint/build/test.
npm run lint:fix
npm run build
npm test

# Lint GitHub Actions workflow files with actionlint (optional)
if command -v actionlint >/dev/null 2>&1; then
  echo "ğŸ› ï¸  Running actionlint..."
  actionlint
else
  echo "âš ï¸  actionlint not found. Your GitHub Actions workflow files are not being linted."
  echo "   ğŸ‘‰ Install it via: brew install actionlint (Mac)"
  echo "   ğŸ‘‰ More options: https://github.com/rhysd/actionlint"
fi

echo "âœ… Pre-commit checks complete."

